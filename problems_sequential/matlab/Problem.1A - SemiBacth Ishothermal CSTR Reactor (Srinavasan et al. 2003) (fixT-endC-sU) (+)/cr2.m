
function [ceq c dceq dc] = cr2(f,t_ult,t_out,df,u,y,stages, ns_a)

% function [c ceq d dc] = cr2(f,t_ult,t_out,df,u,y,stages)
k1 = 0.053     ;
k2 = 0.128     ;
cb_in = 5      ;
Vo = 1         ;
lamb=1^-8      ;
cao=0.72       ;
cbo=0.05       ;
cd_mais = 0.15 ;
cb_mais = 0.025;

timeL=0;

%equality
ceq = [];

timeL=0;

%inequality
c(1) = ((0.5/f(end,3))*((f(end,1)+cb_in-f(end,2))*f(end,3) - (cao+cb_in-cbo)*Vo)) - cd_mais;


c(2) = f(end,2) - cb_mais                                                                  ;


timeL=0;
%equality  derivative
dceq = [];


timeL=0;
%inequality  derivative
dc(1,:) = (0.5)*df(end,1,:)+(-0.5)*df(end,2,:)+((0.5*(cb_in + f(end,1) - 1.0*f(end,2)))/f(end,3) - (0.5*(1.0*f(end,3)*(cb_in + f(end,1) - 1.0*f(end,2)) - Vo*(cao + cb_in - 1.0*cbo)))/f(end,3)^2)*df(end,3,:);
dc(2,:) = (0)*df(end,1,:)+(1)*df(end,2,:)+(0)*df(end,3,:)                                                                                                                                                     ;


dc=transp(dc);
end                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
